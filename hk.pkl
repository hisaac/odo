amends "package://github.com/jdx/hk/releases/download/v1.27.0/hk@1.27.0#/Config.pkl"
import "package://github.com/jdx/hk/releases/download/v1.27.0/hk@1.27.0#/Builtins.pkl"

fail_fast = false
env {
	["HK_MISE"] = "true"
}

local linters = new Mapping<String, Step> {
	["actionlint"] = Builtins.actionlint
	["mise"] = Builtins.mise
	["pkl"] = Builtins.pkl
	["yamllint"] = Builtins.yamllint

	["swift-format"] {
		glob = List("**/*.swift")
		check = "swift format lint --configuration .swift-format {{files}}"
		fix = "swift format format --in-place --configuration .swift-format --parallel {{files}}"
	}
}

hooks {
	["fix"] {
		fix = true
		steps = linters
	}
	["check"] {
		steps = linters
	}
	["pre-commit"] {
		fix = true
		stash = true
		steps = linters
	}
}
